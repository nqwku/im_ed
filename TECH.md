# Техническое задание: Консольный редактор изображений (Image Filter Tool)

**Версия:** 1.0\
**Дата:** 31.01.2025

## 1. Введение

### Цель проекта

Разработать консольную утилиту для базовой обработки изображений (фильтры, коррекция яркости/контраста) с использованием языка C.

### Целевая аудитория

Пользователи, нуждающиеся в простом инструменте для пакетной обработки изображений без графического интерфейса.

## 2. Функциональные требования

### 2.1 Загрузка и сохранение изображений

**Поддерживаемые форматы:**

- **Входные:** `JPEG`, `PNG`.
- **Выходные:** `JPEG` (качество 90%), `PNG`.

**Вывод информации о загруженном изображении:**

- Ширина, высота, число каналов (3 для RGB, 4 для RGBA).

**Обработка ошибок:**

- Некорректный путь к файлу.
- Неподдерживаемый формат.

### 2.2 Фильтры и преобразования

| **Фильтр**     | **Описание**                                                                         | **Параметры**                     |
| -------------- | ------------------------------------------------------------------------------------ | --------------------------------- |
| **Grayscale**  | Преобразование в черно-белое по формуле: `gray = 0.299 * R + 0.587 * G + 0.114 * B`. | Нет.                              |
| **Invert**     | Инверсия цветов: `R = 255 - R`, `G = 255 - G`, `B = 255 - B`.                        | Нет.                              |
| **Brightness** | Коррекция яркости: умножение каналов на коэффициент.                                 | `--brightness [factor] (0.5–2.0)` |
| **Contrast**   | Коррекция контраста: линейное преобразование `pixel = (pixel - 128) * factor + 128`. | `--contrast [factor] (0.5–2.0)`   |
| **Sepia**      | Ретро-эффект: применение матрицы сепии.                                              | Нет.                              |

### 2.3 Аргументы командной строки

Программа должна принимать параметры:

```bash
./image_filter (input) (output) [--filter] [--param value]
```

**Примеры:**

```bash
./image_filter input.jpg output.jpg --filter grayscale
./image_filter input.png output.png --filter brightness --brightness 1.5
```

### 2.4 Обработка ошибок

- Вывод понятных сообщений об ошибках (например, `Error: Unsupported file format 'input.gif'`).

**Коды возврата:**

- `0` — успешное выполнение.
- `1` — ошибка загрузки/сохранения.
- `2` — некорректные аргументы.

## 3. Нефункциональные требования

### 3.1 Производительность

- Обработка изображений размером до **4096x4096 пикселей** за время ≤ **3 сек** (на CPU Intel i5).
- Использование памяти: **не более 150%** от размера изображения.

### 3.2 Кроссплатформенность

- **Поддержка ОС:** Linux, Windows (MinGW), macOS.

### 3.3 Стандарты

- **Язык C:** Стандарт **C17** (ISO/IEC 9899:2018).
- **Кодирование:**
    - Именование переменных в стиле `snake_case`.
    - Комментарии для всех функций (**Doxygen-формат**).
    - Оформление кода по стандарту **Google C Style Guide** (адаптировано под C).

## 4. Требования к окружению

- **Компилятор:** `GCC ≥ 9.0`, `Clang ≥ 10.0`, `MSVC ≥ 2019`.
- **Библиотеки:**
    - `stb_image.h` и `stb_image_write.h` (версия 2.27).
    - Для Windows: предустановленная библиотека `libjpeg`.

## 5. Этапы разработки

1. Реализация базового функционала (загрузка/сохранение, вывод информации).
2. Добавление фильтров: **Grayscale, Invert**.
3. Реализация параметризованных фильтров: **Brightness, Contrast**.
4. Интеграция аргументов командной строки.
5. Тестирование и оптимизация.

## 6. Критерии приемки

- Успешная компиляция на всех целевых платформах.
- Прохождение **unit-тестов** для всех фильтров.
- Отсутствие утечек памяти (**проверка через Valgrind**).
- Соответствие кода стандартам и требованиям документации.

## 7. Документация

### `README.md`:

- Инструкция по сборке.
- Примеры использования.
- Описание фильтров.

### Комментарии в коде:

- Описание функций и алгоритмов.
- Примеры входных/выходных данных для сложных методов.

## 8. Дополнительные требования

- Репозиторий на **GitHub** с лицензией **MIT**.
- Логирование операций в файл `image_filter.log` (опционально).

---

**Утверждено:** [ФИО/Должность]\
**Дата:** [Дата]

---

Это ТЗ соответствует стандарту **ISO/IEC/IEEE 29148** для спецификации требований к ПО. Для форматов изображений используются стандарты:

- **JPEG:** ISO/IEC 10918.
- **PNG:** ISO/IEC 15948.

